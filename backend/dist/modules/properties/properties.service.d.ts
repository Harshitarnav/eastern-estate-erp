import { Repository, DataSource } from 'typeorm';
import { Property } from './entities/property.entity';
import { Tower } from '../towers/entities/tower.entity';
import { Flat } from '../flats/entities/flat.entity';
import { Customer } from '../customers/entities/customer.entity';
import { Booking } from '../bookings/entities/booking.entity';
import { CreatePropertyDto, UpdatePropertyDto, QueryPropertyDto, PaginatedPropertyResponseDto, PropertyResponseDto, PropertyHierarchyDto, PropertyInventorySummaryDto } from './dto';
import { PropertyAccessService } from '../users/services/property-access.service';
export declare class PropertiesService {
    private propertiesRepository;
    private towersRepository;
    private flatsRepository;
    private customersRepository;
    private bookingsRepository;
    private readonly dataSource;
    private readonly propertyAccessService;
    private readonly logger;
    constructor(propertiesRepository: Repository<Property>, towersRepository: Repository<Tower>, flatsRepository: Repository<Flat>, customersRepository: Repository<Customer>, bookingsRepository: Repository<Booking>, dataSource: DataSource, propertyAccessService: PropertyAccessService);
    private checkPropertyAccess;
    create(createPropertyDto: CreatePropertyDto, userId?: string): Promise<PropertyResponseDto>;
    findAll(queryDto: QueryPropertyDto, userId?: string): Promise<PaginatedPropertyResponseDto>;
    getInventorySummary(propertyId: string, userId?: string): Promise<PropertyInventorySummaryDto>;
    findOne(id: string, userId?: string): Promise<PropertyResponseDto>;
    findByCode(code: string, userId?: string): Promise<PropertyResponseDto>;
    getHierarchy(id: string, userId?: string): Promise<PropertyHierarchyDto>;
    update(id: string, updatePropertyDto: UpdatePropertyDto, userId?: string): Promise<PropertyResponseDto>;
    remove(id: string, userId?: string): Promise<void>;
    toggleActive(id: string, userId?: string): Promise<PropertyResponseDto>;
    getStats(userId?: string): Promise<any>;
    private mapToResponseDto;
    private mapFlatToHierarchyDto;
    private calculateTowerStats;
    private getTowerFinancials;
    private getFlatFinancialMap;
    private buildTowerPaymentStages;
    private calculatePropertyFinancials;
    private normalizeImageArray;
    private calculatePropertyStats;
    private toNullableNumber;
    private normalizePropertyPayload;
    private normalizeStringArray;
    private normalizeJsonArray;
    private createDefaultTowersAndFlats;
    private distributeUnitsAcrossTowers;
    private toDate;
}
