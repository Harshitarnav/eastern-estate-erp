import { IsNumber, IsDate, IsString, IsUUID, IsEnum, IsOptional, Min } from 'class-validator';
import { Type } from 'class-transformer';
import { RefundStatus } from '../entities/payment-refund.entity';

export class CreateRefundDto {
  @IsUUID()
  paymentId: string;

  @IsNumber()
  @Min(0.01)
  refundAmount: number;

  @IsString()
  refundReason: string;

  @IsDate()
  @Type(() => Date)
  refundDate: Date;

  @IsString()
  refundMethod: string;

  @IsOptional()
  @IsEnum(RefundStatus)
  status?: RefundStatus;

  @IsOptional()
  @IsString()
  bankDetails?: string;

  @IsOptional()
  @IsString()
  transactionReference?: string;
}

export class ApproveRefundDto {
  @IsOptional()
  @IsString()
  approvalNotes?: string;
}

export class ProcessRefundDto {
  @IsString()
  transactionReference: string;

  @IsOptional()
  @IsString()
  processingNotes?: string;
}
