# Demand Drafts - Quick Start Guide

## ðŸŽ¯ Where to Create/Edit Demand Drafts

### ðŸ“ **Main Location**: Construction Milestones Page

```
Navigation: Payments & Plans â†’ Construction Milestones â†’ Demand Drafts Tab
```

---

## ðŸš€ Quick Workflows

### 1ï¸âƒ£ **Create a Demand Draft** (Automatic)

```
Step 1: Log Construction Progress
â””â”€ Construction â†’ Progress Log
   â””â”€ Select: Property â†’ Tower â†’ Flat
   â””â”€ Log progress (e.g., STRUCTURE at 50%)
   â””â”€ Click "Log Progress"

Step 2: System Auto-Generates Draft
â””â”€ If flat has payment plan + milestone matches
   â””â”€ Draft appears in: Demand Drafts Tab â†’ Pending Review
```

---

### 2ï¸âƒ£ **Edit a Demand Draft**

```
Construction Milestones â†’ Demand Drafts Tab
â””â”€ Find draft in "Pending Review"
   â””â”€ Click "Preview" button
      â””â”€ Opens Demand Draft Detail Page
         â””â”€ Click "Edit Draft"
            â”œâ”€ Modify: Title, Amount, Due Date
            â”œâ”€ Edit HTML content
            â””â”€ Click "Save Changes"
```

**What You Can Edit**:
- âœï¸ Title (e.g., "Payment Demand for Foundation Complete")
- âœï¸ Amount (â‚¹)
- âœï¸ Due Date
- âœï¸ Full HTML Content (complete control)

---

### 3ï¸âƒ£ **Approve & Send a Draft**

```
Step 1: Review Draft
â””â”€ Demand Drafts Tab â†’ Pending Review
   â””â”€ Click "Preview" â†’ Review content
      â””â”€ Click "Approve Draft"

Step 2: Send to Customer
â””â”€ Demand Drafts Tab â†’ Ready to Send
   â””â”€ Click "Send Now"
```

---

### 4ï¸âƒ£ **Export as HTML**

```
Open Demand Draft Detail Page
â””â”€ Click "Export HTML" button
   â””â”€ Downloads as: demand_draft_[id].html
      â””â”€ Can print, convert to PDF, or email manually
```

---

## ðŸ“‹ Demand Draft States

| Status | What It Means | Actions Available |
|--------|---------------|-------------------|
| ðŸŸ¡ **DRAFT** | Pending review | Preview, Edit, Approve |
| ðŸ”µ **READY** | Approved, ready to send | Send, Preview, Export |
| ðŸŸ£ **SENT** | Sent to customer | View only, Export |
| ðŸŸ¢ **PAID** | Payment received | View only, Archive |

---

## ðŸŽ¨ New Feature: Demand Draft Detail Page

**Just Created!** A full-featured page for managing demand drafts.

### Features:
âœ… **Preview Mode** - See formatted HTML
âœ… **Edit Mode** - Modify all fields and content
âœ… **HTML View** - Toggle to see raw HTML
âœ… **Quick Actions** - Approve, Send, Export
âœ… **Metadata Sidebar** - Flat, Customer, Milestone info
âœ… **Status Badges** - Visual indicators

### Access:
```
Click "Preview" button from:
Payments & Plans â†’ Construction Milestones â†’ Demand Drafts Tab
```

---

## ðŸ”§ Quick Reference

| I want to... | Where to go | Action |
|-------------|-------------|--------|
| **View all drafts** | Construction Milestones â†’ Demand Drafts | View table |
| **Edit a draft** | Click "Preview" â†’ "Edit Draft" | Modify content |
| **Approve draft** | Demand Draft Detail Page | Click "Approve" |
| **Send draft** | Demand Drafts â†’ Ready to Send | Click "Send Now" |
| **Export draft** | Demand Draft Detail Page | Click "Export HTML" |
| **Create draft** | Construction â†’ Progress Log | Log progress (auto) |

---

## ðŸ’¡ Pro Tips

1. **Auto-Generation**: Drafts are created automatically when construction progress reaches a milestone
2. **Edit Before Approve**: Review and edit drafts in DRAFT status before approving
3. **Export Anytime**: You can export drafts at any status
4. **HTML Control**: Full control over HTML means you can customize everything
5. **Status Tracking**: Use the tabs to filter drafts by status

---

## ðŸ“Š Visual Flow

```
Construction Progress Logged
         â†“
    Auto-Generate Draft (DRAFT)
         â†“
    Review & Edit â† Click "Preview" button
         â†“
    Approve (READY)
         â†“
    Send to Customer (SENT)
         â†“
    Record Payment (PAID)
```

---

## ðŸŽ‰ What's New

### âœ¨ Just Added: Demand Draft Detail Page

**Before**: Only table view with basic actions
**Now**: Full-featured detail page with:

- ðŸ“„ Beautiful preview mode
- âœï¸ Rich edit mode
- ðŸ“Š Metadata sidebar
- ðŸŽ¨ HTML view toggle
- ðŸ’¾ Export functionality
- âš¡ Quick actions toolbar

**Location**: `/demand-drafts/[id]`

---

## ðŸš¦ Getting Started (3 Steps)

### Step 1: Log Construction Progress
```
Construction â†’ Progress Log â†’ Select Flat â†’ Log 50% STRUCTURE
```

### Step 2: Review Auto-Generated Draft
```
Payments & Plans â†’ Construction Milestones â†’ Demand Drafts Tab
```

### Step 3: Edit, Approve, and Send
```
Click "Preview" â†’ "Edit Draft" â†’ "Approve" â†’ "Send Now"
```

---

## ðŸ“ž Need Help?

**Read the Full Guide**: `DEMAND_DRAFTS_GUIDE.md`
- Complete workflows
- Troubleshooting
- Advanced features
- Examples

**Quick Check**:
1. âœ… Flat has active payment plan?
2. âœ… Milestone linked to construction phase?
3. âœ… Construction progress >= milestone target?

If all âœ…, draft will auto-generate!

---

**ðŸŽ¯ TL;DR**: 

Navigate to **Payments & Plans â†’ Construction Milestones â†’ Demand Drafts** to view, edit, approve, and send all demand drafts. Click "Preview" to open the new detail page where you can fully edit everything!
